dieser code ist ein port von http://www.technical-recipes.com/2011/creating-bitmap-files-from-raw-pixel-data-in-c/

er funktioniert noch nicht vollständig und ist auf 24 bit bmp datein beschränkt.

Möglicherweise kann man ja eine externe lib für BMPs nutzen, alternativ kann man sich sehr viel von hier abschauen: http://qdbmp.sourceforge.net/